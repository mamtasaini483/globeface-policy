<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GlobeFace Emoji Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    background: #020617;
    font-family: system-ui, Arial;
    color: white;
    text-align: center;
}

header {
    padding: 12px;
    font-size: 22px;
    font-weight: bold;
}

canvas {
    background: linear-gradient(#60a5fa, #93c5fd);
    display: block;
    margin: auto;
    border-radius: 16px;
    touch-action: manipulation;
}

button {
    padding: 14px 26px;
    font-size: 18px;
    border-radius: 40px;
    border: 2px solid white;
    background: transparent;
    color: white;
    cursor: pointer;
    margin: 6px;
}

button:active {
    transform: scale(0.9);
}

#menu {
    position: fixed;
    inset: 0;
    background: rgba(2,6,23,0.95);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

#joystick {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    border: 2px solid white;
    position: fixed;
    bottom: 20px;
    left: 20px;
}

#stick {
    width: 50px;
    height: 50px;
    background: white;
    border-radius: 50%;
    position: absolute;
    top: 35px;
    left: 35px;
}
</style>
</head>

<body>

<header>ðŸ˜ƒ GlobeFace Emoji Adventure</header>

<canvas id="game" width="360" height="520"></canvas>

<div id="joystick">
    <div id="stick"></div>
</div>

<div id="menu">
    <h1>ðŸŽ® GlobeFace Game</h1>
    <button onclick="startGame()">â–¶ Start Game</button>
</div>

<script>
// CANVAS
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
ctx.textAlign = "center";
ctx.textBaseline = "middle";

// SOUNDS
const jumpSound = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-game-jump-coin-216.wav");
const coinSound = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-coin-win-notification-1992.wav");
const overSound = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-arcade-retro-game-over-213.wav");

// GAME STATE
let player, obstacle, coin;
let gravity = 0.9;
let speed = 5;
let score = 0;
let lives = 3;
let level = 1;
let running = false;

// START GAME
function startGame() {
    document.getElementById("menu").style.display = "none";
    reset();
    running = true;
    update();
}

function reset() {
    player = { x: 70, y: 420, vy: 0 };
    obstacle = { x: 360, y: 420 };
    coin = { x: 500, y: 380 };
    score = 0;
    lives = 3;
    level = 1;
    speed = 5;
}

// DRAW FUNCTIONS
function drawText(text, x, y, size = 36) {
    ctx.font = size + "px Arial";
    ctx.fillText(text, x, y);
}

function jump() {
    if (player.y >= 420) {
        player.vy = -16;
        jumpSound.play();
    }
}

// INPUT (INSTANT)
canvas.addEventListener("pointerdown", jump);
document.addEventListener("keydown", e => {
    if (e.code === "Space") jump();
});

// GAME LOOP
function update() {
    if (!running) return;
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // PLAYER
    player.vy += gravity;
    player.y += player.vy;
    if (player.y > 420) {
        player.y = 420;
        player.vy = 0;
    }

    // OBSTACLE
    obstacle.x -= speed;
    if (obstacle.x < -40) {
        obstacle.x = canvas.width + 200;
        score++;
        if (score % 5 === 0) {
            level++;
            speed++;
        }
    }

    // COIN
    coin.x -= speed;
    if (coin.x < -40) {
        coin.x = canvas.width + 300;
    }

    // COLLISION BOMB
    if (Math.abs(player.x - obstacle.x) < 26 &&
        Math.abs(player.y - obstacle.y) < 26) {
        lives--;
        obstacle.x = canvas.width + 200;
        if (lives <= 0) gameOver();
    }

    // COLLISION COIN
    if (Math.abs(player.x - coin.x) < 26 &&
        Math.abs(player.y - coin.y) < 26) {
        score += 5;
        coinSound.play();
        coin.x = canvas.width + 300;
    }

    // DRAW
    drawText("ðŸŒ±ðŸŒ±ðŸŒ±ðŸŒ±ðŸŒ±ðŸŒ±ðŸŒ±ðŸŒ±ðŸŒ±", canvas.width/2, 470, 26);
    drawText("ðŸ˜ƒ", player.x, player.y);
    drawText("ðŸ’£", obstacle.x, obstacle.y);
    drawText("â­", coin.x, coin.y);

    ctx.font = "16px Arial";
    ctx.fillText("Score: "+score+"  â¤ï¸"+lives+"  Level: "+level, canvas.width/2, 20);

    requestAnimationFrame(update);
}

function gameOver() {
    running = false;
    overSound.play();
    setTimeout(()=>{
        alert("ðŸ’¥ Game Over\nScore: "+score);
        document.getElementById("menu").style.display = "flex";
    },200);
}
</script>

</body>
</html>
